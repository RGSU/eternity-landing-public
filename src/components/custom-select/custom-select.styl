.custom-select
  position relative

  select
    visually-hidden()

  &__button
    position relative
    display flex
    flex-flow row nowrap
    align-items center
    width 100%
    min-height rem(56px)
    padding 10px 40px 10px 16px
    color var(--text-color)
    font-weight 400
    font-size rem(16px)
    font-family $font-family
    font-variant-numeric lining-nums proportional-nums
    line-height 1.5
    background-color var(--color-white)
    background-clip padding-box
    border 1px solid var(--color-grey-40)
    border-radius 8px
    transition all .2s ease
    appearance none
    ellipsis()
    &:invalid
      box-shadow none
    &:hover
      border-color var(--color-blue-60)
    &:focus-visible
      border-color var(--color-blue-60)
      outline 3px solid var(--color-blue-20)
    &::placeholder
      color var(--color-grey-60)
      opacity 1

    &:disabled
      color var(--color-grey-60)
      background-color var(--color-grey-10)
      border-color var(--color-grey-40)
      pointer-events none

    &:-webkit-autofill
      transition background-color 10000000s ease-out

    .is-invalid &
      color var(--error-color)
      border-color var(--error-color)

    ^[0].is-open &
      background-color var(--color-white)
      border-color var(--color-blue-60)

    ^[0]--placeholder &
      color var(--color-grey-60)


  &__button-caption
    max-width 100%
    ellipsis()

  &__button-caption-prefix
    color var(--text-blind-color)

  &__button-arrow
    position absolute
    top 50%
    right 15px
    display block
    margin-top -12px
    padding 0
    color var(--color-grey-80)
    background-color transparent
    transition transform 0
    size 20px
    svg
      fill currentColor
    ^[0].is-open &
      margin-top -8px
      color var(--color-blue-60)
      transform scaleY(-1)

  &__dropdown
    position absolute
    top 100%
    left 0
    z-index 100
    display none
    min-width 100%
    margin-top 5px
    padding 0
    background-color var(--color-white)
    border 1px solid var(--color-grey-40)
    border-radius rem(6px)
    box-shadow 0px 6px 12px rgba(171, 190, 209, .3)
    ^[0].is-open &
      display block
    ^[0]--top &
      top auto
      bottom 100%
      margin-top 0
      margin-bottom 5px

  &__items
    display block
    max-height 240px
    margin 0
    padding 0
    list-style none
    custom-scrollbar()

  &__item
    display flex
    align-items center
    margin 0
    padding rem(12px) rem(16px)
    color var(--text-color)
    font-weight 400
    font-size rem(16px)
    font-family $font-family
    font-variant-numeric lining-nums proportional-nums
    line-height 1.5
    cursor pointer
    transition all .2s ease
    &:hover
    &:focus-visible
      background-color var(--color-grey-10)
    &.is-placeholder
    &.is-hidden
      display none !important

    &.is-selected
      color var(--color-blue-60)

    ^[0]--multiple &
      display flex
      flex-flow row nowrap
      align-items flex-start

  &__search
    display block
    width 100%
    padding 8px
    input
      display block
      width 100%
      padding 8px 16px
      color var(--text-color)
      font-weight 400
      font-size rem(16px)
      font-family $font-family
      line-height 1.5
      background-color var(--color-white)
      background-clip padding-box
      border 1px solid var(--color-grey-40)
      border-radius 8px
      transition all .2s ease
      appearance none
      &:invalid
        box-shadow none
      &:hover
        border-color var(--color-blue-60)
      &:focus-visible
        border-color var(--color-blue-60)
        outline 3px solid var(--color-blue-20)
      &::placeholder
        color var(--color-grey-60)
        opacity 1
      &::placeholder
        color var(--color-grey-60)
        opacity 1

      &:disabled
        color var(--color-grey-60)
        background-color var(--color-grey-10)
        border-color var(--color-grey-40)
        pointer-events none

      &:-webkit-autofill
        // alt solution without boxshadow
        transition background-color 10000000s ease-out

        // alt solution with boxshadow
        // box-shadow inset 0 0 0 1000px #fff
        // -webkit-text-fill-color #000

      .is-invalid &
        color var(--error-color)
        border-color var(--error-color)

