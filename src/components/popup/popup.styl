.popup
  position fixed
  flex 1 0 auto
  flex-direction column
  width 100%
  max-width 100%
  height 100%
  max-height 100%
  padding 0
  color var(--color-white)
  background var(--card-color)
  border 0
  &:focus
    outline none
  &::backdrop
    background rgba(31, 32, 35, .7)
    backdrop-filter blur(2px)
  +desktop()
    flex none
    width 800px
    max-width calc(100% - 1rem)
    height min-content
    max-height calc(100% - 1rem)
    border-radius rem(30px)

  &.is-open
  &.is-opening
    display flex

  &.is-opening
    animation fadeInZoom .3s forwards
    &::backdrop
      animation fadeIn .3s forwards

  &.is-closing
    animation fadeOutZoom .3s
    &::backdrop
      animation fadeOut .3s

  &__top
    position sticky
    top 0
    z-index 500
    display flex
    flex-flow row nowrap
    align-items center
    padding 6px 8px 6px 12px
    transition all .3s ease
    +desktop()
      position static
      top auto
      min-height rem(60px)
      padding 0
      // background-color #f99
      border-radius rem(16px) rem(16px) 0 0

  &__body
    position relative
    display flex
    flex 1 0 auto
    flex-direction column
    width 100%
    max-width 100%
    padding 20px
    +desktop()
      display block
      flex 0 1 auto
      padding 40px
      overflow-y auto
      custom-scrollbar(6px, transparent, var(--primary-color))

  &__section
    display flex
    flex-direction column
    gap 12px

  &__title
    margin 0 0 rem(12px)
    font-weight 600
    font-size rem(20px)
    font-family $font-family
    line-height 1.3
    +desktop()
      margin 0 0 rem(12px)
      font-size rem(20px)

  &__subtitle
    margin 0 0 rem(16px)
    font-weight 500
    font-size rem(16px)
    line-height 1.4
    +desktop()
      margin-bottom rem(40px)
    p
      &:last-child
        margin-bottom 0

  &__btn-close
    position relative
    display block
    flex 0 0 auto
    margin 0 0 0 auto
    padding 0
    background-color transparent
    border 1px solid rgba(255, 255, 255, .2)
    border-radius 50%
    transition all .2s ease
    size 36px
    &::before
    &::after
      position absolute
      top 50%
      left 50%
      display block
      margin-top -1px
      margin-left -6.5px
      background-color var(--color-white)
      transition all .2s ease
      content ""
      size 14px 1px
      +desktop()
        margin-top -1px
        margin-left -9px
        size 18px 1px
    &::before
      transform rotate(45deg)
    &::after
      transform rotate(-45deg)
    &:hover
    &:focus-visible
      background-color var(--primary-color)
      border-color var(--primary-color)
      outline none
    +desktop()
      position absolute
      top 10px
      right 10px
      margin 0
      size 48px

  &__search-queries
    &:not(:first-child)
      margin-top rem(24px)
      +desktop()
        margin-top rem(32px)

  &__success
  &__error
    display flex
    flex 1 0 auto
    flex-direction column
    gap rem(20px)
    +desktop()
      gap rem(40px)
    & ^[0]__btn-close
      position relative
      top 0
      right 0

  &__success-main
  &__error-main
    display flex
    flex 1 0 auto
    gap rem(10px)
    align-items center
    justify-content space-between

  &__success-icon
    display inline-block
    flex 0 0 auto
    max-width 180px
    height auto
    margin 0 auto

  &__success-title
  &__error-title
    max-width 539px
    margin 0
    font-weight 600
    font-size rem(24px)
    line-height 1.25
    +desktop()
      font-size rem(32px)

  &__success-content
  &__error-content
    p
      &:last-child
        margin-bottom 0

  &__success-bottom
    text-align center

  &__success-button
    width 100%
    +desktop()
      width auto

  &__product
    display flex
    flex-direction column
    gap 24px
    height 100%
    +desktop()
      gap 40px

    & ^[0]__heading
      position relative
      display flex
      flex-wrap wrap
      gap 24px
      padding-right 46px
      padding-bottom 24px
      border-bottom 1px solid rgba(255, 255, 255, .1)
      +desktop()
        flex-wrap nowrap
        gap 32px
        padding-right 55px
        padding-bottom 32px
      &-img
        flex-shrink 0
        size 100px
        overflow hidden
        border-radius 16px
        img
          width 100%
          height 100%
          object-fit cover
          object-position center
          vertical-align top
      &-content
        display flex
        flex-direction column
        gap 12px
        align-items flex-start
        margin-right auto
      &-title
        color var(--color-white)
        font-weight 600
        font-size rem(24px)
        +desktop()
          font-size rem(32px)
      &-chapter
        grid-area chapter
        padding rem(4px) rem(10px)
        color var(--color-white)
        font-size rem(12px)
        background-color rgba(255, 255, 255, .1)
        border-radius 30px
        +desktop()
          font-size rem(14px)
      & ^[-2]__btn-close
        position absolute
        top 0
        right 0
        size 36px
        border 1px solid rgba(255, 255, 255, .2)
        border-radius 50%
        +desktop()
          size 48px
        &:hover
        &:focus-visible
          background-color var(--primary-color)
          border-color var(--primary-color)
        &::after
        &::before
          background-color var(--color-white)
    & ^[0]__text
      height 100%
      padding-right 24px
      color var(--color-white)
      font-size rem(16px)
      custom-scrollbar(4px, rgba(255, 255, 255, .2), rgba(255, 255, 255, .6))
      &::-webkit-scrollbar-track
      &::-webkit-scrollbar
      &::-webkit-scrollbar-thumb
        border-radius 4px
      +desktop()
        padding-right 40px
        font-size rem(18px)

  // Модификаторы

  &--smaller
    +desktop()
      width 520px

  &--small
    +desktop()
      width 420px

  &--middle
    +desktop()
      width 700px

  &--larger
    +desktop()
      width 960px

  &--large
    +desktop()
      width 1160px

  &--largest
    +desktop()
      width 1640px

  &--product
    margin-right 0
    margin-left auto
    background-color var(--card-color)
    +desktop()
      height 100%
      max-height 100%
      border-radius 30px 0 0 30px
    & ^[0]__top
      display none
    & ^[0]__body
      height 100%
      margin 0
      padding rem(20px)
      +desktop()
        padding rem(40px)

  &--success
    & ^[0]__top
      display none

  &--error
    & ^[0]__top
      display none

  &--success
  &--error
    height min-content
    max-height 100%
    border-radius rem(20px)
    +desktop()
      height min-content
      max-height calc(100% - 1rem)

